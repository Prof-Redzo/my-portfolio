---
import Layout from "../../layouts/Layout.astro";
import { projects } from "../../data/projects"; 

interface Project {
  slug: string;
  title: string;
  description: string;
  details?: string;
  image?: string;
  url?: string;
  tech?: string[];
}

export async function getStaticPaths() {
  return projects.map((project: Project) => ({
    params: { slug: project.slug },
    props: { project },
  }));
}

const { project } = Astro.props as { project: Project };
---

<Layout title={project.title} description={project.description}>
  <section class="max-w-3xl mx-auto py-12 px-4">
    
    {project.image && (
      <img
        src={project.image}
        alt={project.title}
        class="rounded-xl mb-6 w-full object-cover h-64"
        loading="lazy"
      />
    )}

    <h1 class="text-3xl font-bold mb-4">{project.title}</h1>
    <p class="text-lg opacity-80 mb-6">{project.description}</p>

    {project.details && (
      <div class="prose mb-6">
        <h2>About this project:</h2>
        <p>{project.details}</p>
      </div>
    )}

    {project.tech && (
      <div class="mb-6">
        <h2 class="text-xl font-semibold mb-2">Technologies Used</h2>
        <ul class="list-disc pl-5">
          {project.tech.map((t: string) => (
            <li>{t}</li>
          ))}
        </ul>
      </div>
    )}

    <div class="flex gap-4 mt-6">
      {project.url && (
        <a
          class="px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 transition"
          href={project.url}
          target="_blank"
          rel="noopener"
        >
          View Repo / Live
        </a>
      )}
      <a href="/my-portfolio/projects" class="px-4 py-2 rounded-lg border hover:bg-gray-100">
        ‚Üê Back to Projects
      </a>
    </div>
  </section>
</Layout>
