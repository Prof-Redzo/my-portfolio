---
import Layout from "../layouts/Layout.astro";
---

<Layout title="Contact - Redžo Efendić" description="Get in touch with me">
  <section class="py-16 max-w-xl mx-auto">
    <h1 class="text-3xl font-bold mb-6 text-center">Get in Touch</h1>
    <p class="text-center opacity-80 mb-8">
      Fill out the form below and I’ll get back to you soon.
    </p>

    <form
      action="https://formsubmit.co/efendicredzo4@gmail.com"
      method="POST"
      class="space-y-4"
    >
    
      <input type="hidden" name="_captcha" value="false" />

      <div>
        <label for="name" class="block text-sm font-medium mb-1">Name</label>
        <input
          type="text"
          id="name"
          name="name"
          required
          class="w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
        />
      </div>

      <div>
        <label for="email" class="block text-sm font-medium mb-1">Email</label>
        <input
          type="email"
          id="email"
          name="email"
          required
          class="w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
        />
      </div>

      <div>
        <label for="message" class="block text-sm font-medium mb-1">Message</label>
        <textarea
          id="message"
          name="message"
          rows="5"
          required
          class="w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
        ></textarea>
      </div>

      <button
        type="submit"
        class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition"
      >
        Send Message
      </button>
    </form>

    <p id="form-status" class="mt-4 text-center"></p>
  </section>

  <script is:inline>
    window.addEventListener("DOMContentLoaded", () => {
      const form = document.querySelector("form");
      const statusBox = document.getElementById("form-status");

      if (!form || !statusBox) return;

      form.addEventListener("submit", async (e) => {
        e.preventDefault();
        const data = new FormData(form);

        try {
          const res = await fetch(form.action, {
            method: "POST",
            body: data,
          });

          if (res.ok) {
            statusBox.textContent = "✅ Your message has been sent!";
            statusBox.className = "mt-4 text-center text-green-600";
            form.reset();
          } else {
            statusBox.textContent = "❌ Something went wrong. Please try again.";
            statusBox.className = "mt-4 text-center text-red-600";
          }
        } catch (err) {
          statusBox.textContent = "⚠️ Network error. Please try again later.";
          statusBox.className = "mt-4 text-center text-red-600";
        }
      });
    });
  </script>
</Layout>
